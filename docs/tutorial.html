<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
      <link rel="shortcut icon" href="img/favicon.ico" />
    <title>Tutorial - GAPy</title>
    <link rel="stylesheet" href="css/theme.css" />
    <link rel="stylesheet" href="css/theme_extra.css" />
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/styles/github.min.css" />
        <link href="assets/_mkdocstrings.css" rel="stylesheet" />
    
      <script>
        // Current page data
        var mkdocs_page_name = "Tutorial";
        var mkdocs_page_input_path = "tutorial.md";
        var mkdocs_page_url = null;
      </script>
    
    <!--[if lt IE 9]>
      <script src="js/html5shiv.min.js"></script>
    <![endif]-->
      <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/highlight.min.js"></script>
      <script>hljs.highlightAll();</script> 
</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side stickynav">
    <div class="wy-side-scroll">
      <div class="wy-side-nav-search">
          <a href="index.html" class="icon icon-home"> GAPy
        </a>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="index.html">General</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="classes.html">Classes</a>
                </li>
              </ul>
              <ul class="current">
                <li class="toctree-l1 current"><a class="reference internal current" href="#">Tutorial</a>
    <ul class="current">
    <li class="toctree-l2"><a class="reference internal" href="#generic-solution-coding">Generic solution coding</a>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#fitness-function-definition">Fitness function definition</a>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#crossover-function-definition">Crossover function definition</a>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#mutation-function-definition">Mutation function definition</a>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#gapy-optimizer-instantiation">GAPy optimizer instantiation</a>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#gapy.GAPy">GAPy</a>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#gapy.GAPy.__init__">__init__</a>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#gapy.GAPy.describe_population">describe_population</a>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#gapy.GAPy.optimize">optimize</a>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#genetic-optimization">Genetic optimization</a>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#gapy.GAPy.optimize">optimize</a>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#optimization-results">Optimization results</a>
    </li>
    </ul>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="resources.html">Resources</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="examples.html">Examples</a>
                </li>
              </ul>
      </div>
    </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">
      <nav class="wy-nav-top" role="navigation" aria-label="Mobile navigation menu">
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">GAPy</a>
        
      </nav>
      <div class="wy-nav-content">
        <div class="rst-content"><div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="index.html" class="icon icon-home" aria-label="Docs"></a></li>
      <li class="breadcrumb-item active">Tutorial</li>
    <li class="wy-breadcrumbs-aside">
    </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
            <div class="section" itemprop="articleBody">
              
                <h1 id="gapy-tutorial">GAPy tutorial</h1>
<p><strong>Steps</strong></p>
<ol>
<li>
<p>Generic solution coding</p>
</li>
<li>
<p>Fitness function definition</p>
</li>
<li>
<p>Genetic operators definition</p>
</li>
<li>
<p>GAPy optimizer instantiation</p>
</li>
<li>
<p>Genetic optimization</p>
</li>
</ol>
<h2 id="generic-solution-coding">Generic solution coding</h2>
<p>GAPy supports any coding for the candidate solutions that will be evaluated and evolved throughout the GA optimization process. For this reason the initial population is manually created. Then GAPy thinks to the rest by converting - <em>invisibly to the user</em> - raw solutions into <code>GAPy_solution</code> objects that are used internally by GAPy.</p>
<p>User must pay attention to create suitable <strong>crossover</strong> and <strong>mutation</strong> functions in order to be compliant to the original coding and the <strong>fitness</strong> function.</p>
<h2 id="fitness-function-definition">Fitness function definition</h2>
<p>The fitness function evaluates the goodness of individual solutions returning a numeric evaluation of <code>float</code> type. Being GAPy a minimization oriented framework, the lower the fitness the better the solution.</p>
<p>The signature of a generic fitness function is: <code>Callable[[Any],float]</code> and in <em>pseudo-code</em>:</p>
<pre><code class="language-python">def sample_fitness(solution:Any)-&gt;float:
    do_some_computation
    return evaluation
</code></pre>
<h2 id="crossover-function-definition">Crossover function definition</h2>
<p>Crossover function returns a new <em>offspring</em> solution from two <em>parent</em> solutions.</p>
<p>The signature of a generic crossover function is: <code>Callable[[Any,Any],float]</code> and in <em>pseudo-code</em>:</p>
<pre><code class="language-python">def sample_crossover(parent1,parent2:Any)-&gt;Any:
    offsprinf_solution = do_some_computation(parent1,parent2)
    return offsprinf_solution
</code></pre>
<h2 id="mutation-function-definition">Mutation function definition</h2>
<p>Mutation function returns a mutated version of a solution starting from an existing one.</p>
<p>The signature of a generic mutation function is: <code>Callable[[Any],float]</code> and in <em>pseudo-code</em>:</p>
<pre><code class="language-python">def sample_mutation(original:Any)-&gt;Any:
    mutated_solution = do_some_computation(original)
    return mutated_solution
</code></pre>
<h2 id="gapy-optimizer-instantiation">GAPy optimizer instantiation</h2>
<p>Once:</p>
<ul>
<li>
<p>the initial population is formed as a list of raw solutions</p>
</li>
<li>
<p>the fitness function is ready</p>
</li>
<li>
<p>the crossover and mutation functions are defined</p>
</li>
</ul>
<p>the GAPy optimizer can be instantiated like this:</p>
<p><code>gapy_optimizer = GAPy(...)</code></p>
<p>that calls the constructor</p>


<div class="doc doc-object doc-class">



<a id="gapy.GAPy"></a>
    <div class="doc doc-contents first">


        <p>Class for the GA engine.
- Minimization of the fitness function value is assumed</p>

              <details class="quote">
                <summary>Source code in <code>gapy.py</code></summary>
                <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">268</span>
<span class="normal">269</span>
<span class="normal">270</span>
<span class="normal">271</span>
<span class="normal">272</span>
<span class="normal">273</span>
<span class="normal">274</span>
<span class="normal">275</span>
<span class="normal">276</span>
<span class="normal">277</span>
<span class="normal">278</span>
<span class="normal">279</span>
<span class="normal">280</span>
<span class="normal">281</span>
<span class="normal">282</span>
<span class="normal">283</span>
<span class="normal">284</span>
<span class="normal">285</span>
<span class="normal">286</span>
<span class="normal">287</span>
<span class="normal">288</span>
<span class="normal">289</span>
<span class="normal">290</span>
<span class="normal">291</span>
<span class="normal">292</span>
<span class="normal">293</span>
<span class="normal">294</span>
<span class="normal">295</span>
<span class="normal">296</span>
<span class="normal">297</span>
<span class="normal">298</span>
<span class="normal">299</span>
<span class="normal">300</span>
<span class="normal">301</span>
<span class="normal">302</span>
<span class="normal">303</span>
<span class="normal">304</span>
<span class="normal">305</span>
<span class="normal">306</span>
<span class="normal">307</span>
<span class="normal">308</span>
<span class="normal">309</span>
<span class="normal">310</span>
<span class="normal">311</span>
<span class="normal">312</span>
<span class="normal">313</span>
<span class="normal">314</span>
<span class="normal">315</span>
<span class="normal">316</span>
<span class="normal">317</span>
<span class="normal">318</span>
<span class="normal">319</span>
<span class="normal">320</span>
<span class="normal">321</span>
<span class="normal">322</span>
<span class="normal">323</span>
<span class="normal">324</span>
<span class="normal">325</span>
<span class="normal">326</span>
<span class="normal">327</span>
<span class="normal">328</span>
<span class="normal">329</span>
<span class="normal">330</span>
<span class="normal">331</span>
<span class="normal">332</span>
<span class="normal">333</span>
<span class="normal">334</span>
<span class="normal">335</span>
<span class="normal">336</span>
<span class="normal">337</span>
<span class="normal">338</span>
<span class="normal">339</span>
<span class="normal">340</span>
<span class="normal">341</span>
<span class="normal">342</span>
<span class="normal">343</span>
<span class="normal">344</span>
<span class="normal">345</span>
<span class="normal">346</span>
<span class="normal">347</span>
<span class="normal">348</span>
<span class="normal">349</span>
<span class="normal">350</span>
<span class="normal">351</span>
<span class="normal">352</span>
<span class="normal">353</span>
<span class="normal">354</span>
<span class="normal">355</span>
<span class="normal">356</span>
<span class="normal">357</span>
<span class="normal">358</span>
<span class="normal">359</span>
<span class="normal">360</span>
<span class="normal">361</span>
<span class="normal">362</span>
<span class="normal">363</span>
<span class="normal">364</span>
<span class="normal">365</span>
<span class="normal">366</span>
<span class="normal">367</span>
<span class="normal">368</span>
<span class="normal">369</span>
<span class="normal">370</span>
<span class="normal">371</span>
<span class="normal">372</span>
<span class="normal">373</span>
<span class="normal">374</span>
<span class="normal">375</span>
<span class="normal">376</span>
<span class="normal">377</span>
<span class="normal">378</span>
<span class="normal">379</span>
<span class="normal">380</span>
<span class="normal">381</span>
<span class="normal">382</span>
<span class="normal">383</span>
<span class="normal">384</span>
<span class="normal">385</span>
<span class="normal">386</span>
<span class="normal">387</span>
<span class="normal">388</span>
<span class="normal">389</span>
<span class="normal">390</span>
<span class="normal">391</span>
<span class="normal">392</span>
<span class="normal">393</span>
<span class="normal">394</span>
<span class="normal">395</span>
<span class="normal">396</span>
<span class="normal">397</span>
<span class="normal">398</span>
<span class="normal">399</span>
<span class="normal">400</span>
<span class="normal">401</span>
<span class="normal">402</span>
<span class="normal">403</span>
<span class="normal">404</span>
<span class="normal">405</span>
<span class="normal">406</span>
<span class="normal">407</span>
<span class="normal">408</span>
<span class="normal">409</span>
<span class="normal">410</span>
<span class="normal">411</span>
<span class="normal">412</span>
<span class="normal">413</span>
<span class="normal">414</span>
<span class="normal">415</span>
<span class="normal">416</span>
<span class="normal">417</span>
<span class="normal">418</span>
<span class="normal">419</span>
<span class="normal">420</span>
<span class="normal">421</span>
<span class="normal">422</span>
<span class="normal">423</span>
<span class="normal">424</span>
<span class="normal">425</span>
<span class="normal">426</span>
<span class="normal">427</span>
<span class="normal">428</span>
<span class="normal">429</span>
<span class="normal">430</span>
<span class="normal">431</span>
<span class="normal">432</span>
<span class="normal">433</span>
<span class="normal">434</span>
<span class="normal">435</span>
<span class="normal">436</span>
<span class="normal">437</span>
<span class="normal">438</span>
<span class="normal">439</span>
<span class="normal">440</span>
<span class="normal">441</span>
<span class="normal">442</span>
<span class="normal">443</span>
<span class="normal">444</span>
<span class="normal">445</span>
<span class="normal">446</span>
<span class="normal">447</span>
<span class="normal">448</span>
<span class="normal">449</span>
<span class="normal">450</span>
<span class="normal">451</span>
<span class="normal">452</span>
<span class="normal">453</span>
<span class="normal">454</span>
<span class="normal">455</span>
<span class="normal">456</span>
<span class="normal">457</span>
<span class="normal">458</span>
<span class="normal">459</span>
<span class="normal">460</span>
<span class="normal">461</span>
<span class="normal">462</span>
<span class="normal">463</span>
<span class="normal">464</span>
<span class="normal">465</span>
<span class="normal">466</span>
<span class="normal">467</span>
<span class="normal">468</span>
<span class="normal">469</span>
<span class="normal">470</span>
<span class="normal">471</span>
<span class="normal">472</span>
<span class="normal">473</span>
<span class="normal">474</span>
<span class="normal">475</span>
<span class="normal">476</span>
<span class="normal">477</span>
<span class="normal">478</span>
<span class="normal">479</span>
<span class="normal">480</span>
<span class="normal">481</span>
<span class="normal">482</span>
<span class="normal">483</span>
<span class="normal">484</span>
<span class="normal">485</span>
<span class="normal">486</span>
<span class="normal">487</span>
<span class="normal">488</span>
<span class="normal">489</span>
<span class="normal">490</span>
<span class="normal">491</span>
<span class="normal">492</span>
<span class="normal">493</span>
<span class="normal">494</span>
<span class="normal">495</span>
<span class="normal">496</span>
<span class="normal">497</span>
<span class="normal">498</span>
<span class="normal">499</span>
<span class="normal">500</span>
<span class="normal">501</span>
<span class="normal">502</span>
<span class="normal">503</span>
<span class="normal">504</span>
<span class="normal">505</span>
<span class="normal">506</span>
<span class="normal">507</span>
<span class="normal">508</span>
<span class="normal">509</span>
<span class="normal">510</span>
<span class="normal">511</span>
<span class="normal">512</span>
<span class="normal">513</span>
<span class="normal">514</span>
<span class="normal">515</span>
<span class="normal">516</span>
<span class="normal">517</span>
<span class="normal">518</span>
<span class="normal">519</span>
<span class="normal">520</span>
<span class="normal">521</span>
<span class="normal">522</span>
<span class="normal">523</span>
<span class="normal">524</span>
<span class="normal">525</span>
<span class="normal">526</span>
<span class="normal">527</span>
<span class="normal">528</span>
<span class="normal">529</span>
<span class="normal">530</span>
<span class="normal">531</span>
<span class="normal">532</span>
<span class="normal">533</span>
<span class="normal">534</span>
<span class="normal">535</span>
<span class="normal">536</span>
<span class="normal">537</span>
<span class="normal">538</span>
<span class="normal">539</span>
<span class="normal">540</span>
<span class="normal">541</span>
<span class="normal">542</span>
<span class="normal">543</span>
<span class="normal">544</span>
<span class="normal">545</span>
<span class="normal">546</span>
<span class="normal">547</span>
<span class="normal">548</span>
<span class="normal">549</span>
<span class="normal">550</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span> <span class="nc">GAPy</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&#39;&#39;&#39;</span>

<span class="sd">    Class for the GA engine.</span>
<span class="sd">    - Minimization of the fitness function value is assumed</span>

<span class="sd">    &#39;&#39;&#39;</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">initial_population</span><span class="p">:</span><span class="nb">list</span><span class="p">[</span><span class="n">Any</span><span class="p">],</span>
                 <span class="n">fitness_function</span><span class="p">:</span><span class="n">Callable</span><span class="p">[[</span><span class="n">Any</span><span class="p">],</span><span class="nb">float</span><span class="p">],</span>
                 <span class="n">selection_function</span><span class="p">:</span><span class="n">Callable</span><span class="p">[[</span><span class="nb">list</span><span class="p">[</span><span class="n">GAPy_solution</span><span class="p">],</span><span class="nb">int</span><span class="p">],</span><span class="nb">list</span><span class="p">[</span><span class="n">GAPy_solution</span><span class="p">]],</span>
                 <span class="n">crossover_function</span><span class="p">:</span><span class="n">Callable</span><span class="p">[[</span><span class="n">Any</span><span class="p">,</span><span class="n">Any</span><span class="p">],</span><span class="n">Any</span><span class="p">],</span>
                 <span class="n">mutation_function</span><span class="p">:</span><span class="n">Callable</span><span class="p">[[</span><span class="n">Any</span><span class="p">,</span><span class="n">Any</span><span class="p">],</span><span class="n">Any</span><span class="p">]):</span>
<span class="w">        </span><span class="sd">&#39;&#39;&#39;</span>
<span class="sd">        Creates and initializes a GAPy object</span>

<span class="sd">        Args:</span>
<span class="sd">            initial_population (list[Any]): List of the chromosomes forming the</span>
<span class="sd">                initial population. Any type is supported.</span>
<span class="sd">            fitness_function (Callable[[Any],float]): fitness function. Being</span>
<span class="sd">                GAPy designed for minimization, the lower the fitness value</span>
<span class="sd">                for a solution, the better it is.</span>
<span class="sd">            selection_function (Callable[[list[GAPy_solution],int],list[GAPy_solution]]): GA selection function.</span>
<span class="sd">            crossover_function (Callable[[Any,Any],Any]): GA crossover function.</span>
<span class="sd">            mutation_function (Callable[[Any,Any],Any]): GA mutation function.</span>

<span class="sd">        Returns:</span>
<span class="sd">            None.</span>

<span class="sd">        &#39;&#39;&#39;</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">pop_size</span><span class="o">=</span><span class="nb">len</span><span class="p">(</span><span class="n">initial_population</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">status_summary</span><span class="o">=</span><span class="p">{</span><span class="s1">&#39;generation&#39;</span><span class="p">:</span><span class="mi">0</span><span class="p">,</span>
                             <span class="s1">&#39;current_best_fitness&#39;</span><span class="p">:[],</span>
                             <span class="s1">&#39;mean_fitness&#39;</span><span class="p">:[],</span>
                             <span class="s1">&#39;global_best_fitness&#39;</span><span class="p">:[],</span>
                             <span class="s1">&#39;best_solution_age&#39;</span><span class="p">:</span><span class="mi">0</span><span class="p">}</span>

        <span class="c1"># creating the initial population</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">population</span><span class="o">=</span><span class="p">[]</span>
        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">pop_size</span><span class="p">):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">population</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">GAPy_solution</span><span class="p">(</span><span class="n">initial_population</span><span class="p">[</span><span class="n">i</span><span class="p">]))</span>
        <span class="c1">#self.population=np.array(self.population)</span>

        <span class="c1"># linking functions</span>
        <span class="c1"># =================</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">fitness_function</span><span class="o">=</span><span class="n">fitness_function</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">selection_function</span><span class="o">=</span><span class="n">selection_function</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">crossover_function</span><span class="o">=</span><span class="n">crossover_function</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">mutation_function</span><span class="o">=</span><span class="n">mutation_function</span>




    <span class="k">def</span> <span class="nf">describe_population</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&#39;&#39;&#39;</span>
<span class="sd">        Shortly describes the GAPy actual population, including raw-coding</span>
<span class="sd">        of each solution and fitness value.</span>

<span class="sd">        Returns:</span>
<span class="sd">            None.</span>

<span class="sd">        &#39;&#39;&#39;</span>
        <span class="k">for</span> <span class="n">i</span><span class="p">,</span><span class="n">p</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">population</span><span class="p">):</span>
            <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;[</span><span class="si">%d</span><span class="s1">] </span><span class="si">%s</span><span class="s1"> &#39;</span><span class="o">%</span><span class="p">(</span><span class="n">i</span><span class="o">+</span><span class="mi">1</span><span class="p">,</span><span class="n">p</span><span class="o">.</span><span class="n">coded</span><span class="p">),</span><span class="n">end</span><span class="o">=</span><span class="s1">&#39;&#39;</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">p</span><span class="o">.</span><span class="n">fitness</span><span class="o">==</span><span class="kc">None</span><span class="p">:</span>
                <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;F: na&#39;</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;F: </span><span class="si">%.3g</span><span class="s1">&#39;</span><span class="o">%</span><span class="n">p</span><span class="o">.</span><span class="n">fitness</span><span class="p">)</span>



    <span class="k">def</span> <span class="nf">_get_solutions_fitness</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span><span class="o">-&gt;</span><span class="nb">list</span><span class="p">[</span><span class="nb">float</span><span class="p">]:</span>
<span class="w">        </span><span class="sd">&#39;&#39;&#39;</span>
<span class="sd">        Returns the list of the fitness values of the solutions within</span>
<span class="sd">        the current population.</span>

<span class="sd">        Returns:</span>
<span class="sd">            list[float]: list of the fitness values of the solutions within</span>
<span class="sd">                the current population.</span>

<span class="sd">        &#39;&#39;&#39;</span>
        <span class="n">evaluations</span><span class="o">=</span><span class="p">[</span><span class="n">sol</span><span class="o">.</span><span class="n">fitness</span> <span class="k">for</span> <span class="n">sol</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">population</span><span class="p">]</span>
        <span class="k">return</span> <span class="n">evaluations</span>    


    <span class="k">def</span> <span class="nf">_eval_population</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&#39;&#39;&#39;</span>
<span class="sd">        Calculates the fitness for all the samples in the current population.</span>
<span class="sd">        Fitness is stored in the .fitness field of each GAPy_solution object.</span>

<span class="sd">        Returns:</span>
<span class="sd">            None.</span>

<span class="sd">        &#39;&#39;&#39;</span>
        <span class="k">for</span> <span class="n">sol</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">population</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">sol</span><span class="o">.</span><span class="n">changed</span><span class="p">:</span>
                <span class="n">sol</span><span class="o">.</span><span class="n">fitness</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">fitness_function</span><span class="p">(</span><span class="n">sol</span><span class="o">.</span><span class="n">coded</span><span class="p">)</span>
                <span class="n">sol</span><span class="o">.</span><span class="n">changed</span><span class="o">=</span><span class="kc">False</span>



    <span class="k">def</span> <span class="nf">optimize</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">max_generations</span><span class="p">:</span><span class="nb">int</span><span class="o">=</span><span class="mi">100</span><span class="p">,</span>
                 <span class="n">target_fitness</span><span class="p">:</span><span class="nb">float</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span>
                 <span class="n">max_time</span><span class="p">:</span><span class="nb">float</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">Inf</span><span class="p">,</span>
                 <span class="n">patience</span><span class="p">:</span><span class="nb">float</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">Inf</span><span class="p">,</span>
                 <span class="n">elite</span><span class="p">:</span><span class="nb">int</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span>
                 <span class="n">recombination_rates</span><span class="p">:</span><span class="nb">list</span><span class="p">[</span><span class="nb">int</span><span class="p">,</span><span class="nb">int</span><span class="p">,</span><span class="nb">int</span><span class="p">]</span><span class="o">=</span><span class="p">[</span><span class="mf">0.3</span><span class="p">,</span> <span class="mf">0.7</span><span class="p">,</span> <span class="mf">0.1</span><span class="p">],</span>
                 <span class="n">print_frequency</span><span class="p">:</span><span class="nb">int</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span><span class="o">-&gt;</span><span class="n">GAPy_solution</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&#39;&#39;&#39;</span>
<span class="sd">        Starts the GA-based optimization and returns the obtained solution.</span>

<span class="sd">        Args:</span>
<span class="sd">            max_generations (int, optional): Maximum allowed generations for the GA. Defaults to 100.</span>
<span class="sd">            target_fitness (float, optional): Target fitness (minimization): if reached the algorithm stops. Defaults to 0.            </span>
<span class="sd">            max_time (float, optional): Maximum time for optimization, in seconds. Defaults to np.Inf.</span>
<span class="sd">            patience (float, optional): Maximum number of generations without improvement: if overcome the algorithm is stopped. Defaults to np.Inf.</span>
<span class="sd">            elite (int, optional): Number of elite candidate solutions. Defaults to 0.</span>
<span class="sd">            recombination_rates (list[int,int,int], optional): Recombination rates: rate of survivors as they are,</span>
<span class="sd">                rate of offspring solutions, rate of mutated elements. First 2 must sum up to 1. Last one &lt;=1. Defaults to [0.3, 0.7, 0.1].</span>
<span class="sd">            print_frequency (int, optional): Frequency of search status reporting in generations . Defaults to 1.</span>

<span class="sd">        Returns:</span>
<span class="sd">            GAPy_solution: achieved solution at the termination of the optimization.</span>

<span class="sd">        &#39;&#39;&#39;</span>


        <span class="n">optimization_start_time</span><span class="o">=</span><span class="n">time</span><span class="o">.</span><span class="n">time</span><span class="p">()</span>

        <span class="c1"># initializations</span>
        <span class="n">generation</span><span class="o">=</span><span class="mi">1</span>

        <span class="c1"># number of arguments of genetic operators</span>
        <span class="n">nargs_crossover</span><span class="o">=</span><span class="nb">len</span><span class="p">(</span><span class="n">signature</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">crossover_function</span><span class="p">)</span><span class="o">.</span><span class="n">parameters</span><span class="p">)</span>

        <span class="c1"># first evaluation and associated operations</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_eval_population</span><span class="p">()</span>
        <span class="n">current_fitness</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_get_solutions_fitness</span><span class="p">()</span>


        <span class="c1"># for elite</span>
        <span class="n">sorted_indices</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">argsort</span><span class="p">(</span><span class="n">current_fitness</span><span class="p">)</span>    

        <span class="c1"># best element and fitness</span>
        <span class="n">best_fitness</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">min</span><span class="p">(</span><span class="n">current_fitness</span><span class="p">)</span>
        <span class="c1">#best_solution=self.population[sorted_indices[0]]</span>


        <span class="c1"># update dello status</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">status_summary</span><span class="p">[</span><span class="s1">&#39;generation&#39;</span><span class="p">]</span><span class="o">=</span><span class="n">generation</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">status_summary</span><span class="p">[</span><span class="s1">&#39;current_best_fitness&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">min</span><span class="p">(</span><span class="n">current_fitness</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">status_summary</span><span class="p">[</span><span class="s1">&#39;mean_fitness&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">mean</span><span class="p">(</span><span class="n">current_fitness</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">status_summary</span><span class="p">[</span><span class="s1">&#39;global_best_fitness&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">best_fitness</span><span class="p">)</span>


        <span class="c1"># print(&#39;[%d/%d] Ave: %6.3g  Curr.Best: %6.3g  Best: %6.3g [Age: %d]&#39;%(generation,</span>
        <span class="c1">#                                                         max_generations,</span>
        <span class="c1">#                                                         np.mean(current_fitness),</span>
        <span class="c1">#                                                         np.min(current_fitness),</span>
        <span class="c1">#                                                         best_fitness,</span>
        <span class="c1">#                                                         self.status_summary[&#39;best_solution_age&#39;]</span>
        <span class="c1">#                                                         )) </span>

        <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;[</span><span class="si">{</span><span class="n">generation</span><span class="si">:</span><span class="s2">&gt;6d</span><span class="si">}</span><span class="s2">/</span><span class="si">{</span><span class="n">max_generations</span><span class="si">:</span><span class="s2">&lt;6d</span><span class="si">}</span><span class="s2">] Ave.:</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">status_summary</span><span class="p">[</span><span class="s1">&#39;mean_fitness&#39;</span><span class="p">][</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span><span class="si">:</span><span class="s2">6.3g</span><span class="si">}</span><span class="s2"> Curr.Best:</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">status_summary</span><span class="p">[</span><span class="s1">&#39;current_best_fitness&#39;</span><span class="p">][</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span><span class="si">:</span><span class="s2">6.3g</span><span class="si">}</span><span class="s2"> Best:</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">status_summary</span><span class="p">[</span><span class="s1">&#39;global_best_fitness&#39;</span><span class="p">][</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span><span class="si">:</span><span class="s2">6.3g</span><span class="si">}</span><span class="s2"> [AGE </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">status_summary</span><span class="p">[</span><span class="s1">&#39;best_solution_age&#39;</span><span class="p">]</span><span class="si">}</span><span class="s2">]&quot;</span><span class="p">)</span>



        <span class="c1">#   =========================================</span>
        <span class="c1">#   MAIN CYCLE</span>
        <span class="c1">#   =========================================</span>
        <span class="c1"># in the cycle if terminal condition not satisfied</span>

        <span class="n">best_fitness</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">Inf</span>
        <span class="k">while</span> <span class="n">generation</span><span class="o">&lt;</span><span class="n">max_generations</span> <span class="ow">and</span> \
            <span class="n">best_fitness</span><span class="o">&gt;</span><span class="n">target_fitness</span> <span class="ow">and</span> \
            <span class="bp">self</span><span class="o">.</span><span class="n">status_summary</span><span class="p">[</span><span class="s1">&#39;best_solution_age&#39;</span><span class="p">]</span><span class="o">&lt;=</span><span class="n">patience</span> <span class="ow">and</span> \
            <span class="n">time</span><span class="o">.</span><span class="n">time</span><span class="p">()</span><span class="o">-</span><span class="n">optimization_start_time</span><span class="o">&lt;</span><span class="n">max_time</span><span class="p">:</span>


            <span class="c1"># EVOLVING THE POPULATION</span>
            <span class="c1"># =============================</span>

            <span class="c1"># determine recombination rates</span>
            <span class="n">num_survivors</span><span class="o">=</span><span class="nb">int</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">round</span><span class="p">(</span><span class="n">recombination_rates</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">*</span><span class="bp">self</span><span class="o">.</span><span class="n">pop_size</span><span class="p">))</span><span class="o">-</span><span class="n">elite</span>
            <span class="n">num_crossover</span><span class="o">=</span><span class="nb">int</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">pop_size</span><span class="o">-</span><span class="p">(</span><span class="n">num_survivors</span><span class="o">+</span><span class="n">elite</span><span class="p">))</span>
            <span class="n">num_mutations</span><span class="o">=</span><span class="nb">int</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">round</span><span class="p">(</span><span class="n">recombination_rates</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span><span class="o">*</span><span class="bp">self</span><span class="o">.</span><span class="n">pop_size</span><span class="p">))</span>


            <span class="c1"># preparation of new population:</span>
            <span class="c1"># starts as an empty list of GAPy_solution</span>
            <span class="n">new_population</span><span class="o">=</span><span class="p">[]</span>


            <span class="c1"># adding survivors</span>
            <span class="c1"># ====================</span>
            <span class="n">survivors</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">selection_function</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">population</span><span class="p">,</span> <span class="n">num_survivors</span><span class="p">)</span>
            <span class="k">for</span> <span class="n">s</span> <span class="ow">in</span> <span class="n">survivors</span><span class="p">:</span>
                <span class="n">s</span><span class="o">.</span><span class="n">changed</span><span class="o">=</span><span class="kc">False</span>
                <span class="n">new_population</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">copy</span><span class="o">.</span><span class="n">deepcopy</span><span class="p">(</span><span class="n">s</span><span class="p">))</span>

            <span class="c1"># adding offsprings</span>
            <span class="c1"># ====================</span>
            <span class="k">for</span> <span class="n">id_offspring</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">num_crossover</span><span class="p">):</span>
                <span class="n">parents</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">selection_function</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">population</span><span class="p">,</span><span class="mi">2</span><span class="p">)</span>
<span class="w">                </span><span class="sd">&#39;&#39;&#39;</span>
<span class="sd">                There are basically two types of hard-coded crossover functions (CF):</span>
<span class="sd">                    1. Simple one: the CF takes only the 2 parents and mixes them</span>
<span class="sd">                    2. Weighted: the CF takes 4 arguments, namely the 2 parents</span>
<span class="sd">                        and their fitness values (in this order) and generates</span>
<span class="sd">                        offspring considering this latter information.</span>

<span class="sd">                This is detected from the CF itself based on its number of arguments.</span>
<span class="sd">                &#39;&#39;&#39;</span>
                <span class="k">if</span> <span class="n">nargs_crossover</span><span class="o">==</span><span class="mi">2</span><span class="p">:</span> <span class="c1"># simple corssover function</span>
                    <span class="n">new_candidate</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">crossover_function</span><span class="p">(</span><span class="n">parents</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">coded</span><span class="p">,</span><span class="n">parents</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">coded</span><span class="p">)</span>
                <span class="k">else</span><span class="p">:</span> <span class="c1"># pass additional info</span>
                    <span class="n">new_candidate</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">crossover_function</span><span class="p">(</span><span class="n">parents</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">coded</span><span class="p">,</span>
                                                          <span class="n">parents</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">coded</span><span class="p">,</span>
                                                          <span class="n">parents</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">fitness</span><span class="p">,</span>
                                                          <span class="n">parents</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">fitness</span><span class="p">)</span>

                <span class="n">new_candidate</span><span class="o">=</span><span class="n">GAPy_solution</span><span class="p">(</span><span class="n">new_candidate</span><span class="p">)</span>
                <span class="n">new_population</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">new_candidate</span><span class="p">)</span>

            <span class="c1"># preserve elite-solutions from mutation</span>
            <span class="n">elite_solutions</span><span class="o">=</span><span class="p">[]</span>
            <span class="k">for</span> <span class="n">e</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">elite</span><span class="p">):</span>
                <span class="n">elite_solutions</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">copy</span><span class="o">.</span><span class="n">deepcopy</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">population</span><span class="p">[</span><span class="n">sorted_indices</span><span class="p">[</span><span class="n">e</span><span class="p">]]))</span>

            <span class="c1"># perform mutations</span>
            <span class="c1"># ====================</span>
            <span class="n">mutating_p</span><span class="o">=</span><span class="nb">list</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">choice</span><span class="p">(</span><span class="n">new_population</span><span class="p">,</span><span class="n">num_mutations</span><span class="p">))</span>
            <span class="k">for</span> <span class="n">mp</span> <span class="ow">in</span> <span class="n">mutating_p</span><span class="p">:</span>
                <span class="n">mp</span><span class="o">.</span><span class="n">coded</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">mutation_function</span><span class="p">(</span><span class="n">mp</span><span class="o">.</span><span class="n">coded</span><span class="p">)</span>
                <span class="n">mp</span><span class="o">.</span><span class="n">fitness</span><span class="o">=</span><span class="kc">None</span>
                <span class="n">mp</span><span class="o">.</span><span class="n">changed</span><span class="o">=</span><span class="kc">True</span>


            <span class="c1"># after mutation copy the elite solutions</span>
            <span class="k">for</span> <span class="n">e</span> <span class="ow">in</span> <span class="n">elite_solutions</span><span class="p">:</span>
                <span class="n">new_population</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">e</span><span class="p">)</span>


            <span class="c1"># set new population</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">population</span><span class="o">=</span><span class="n">new_population</span>


            <span class="c1"># NEW EVALUATION OF POPULATION</span>
            <span class="c1"># =============================</span>
            <span class="n">generation</span><span class="o">+=</span><span class="mi">1</span>
            <span class="c1"># evaluate population and related operations</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_eval_population</span><span class="p">()</span>
            <span class="n">current_fitness</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_get_solutions_fitness</span><span class="p">()</span>
            <span class="n">sorted_indices</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">argsort</span><span class="p">(</span><span class="n">current_fitness</span><span class="p">)</span>

            <span class="c1">#self.describe_population()</span>
            <span class="c1">#input(&quot;Press Enter to continue...&quot;)</span>

            <span class="k">if</span> <span class="n">np</span><span class="o">.</span><span class="n">min</span><span class="p">(</span><span class="n">current_fitness</span><span class="p">)</span><span class="o">&lt;</span><span class="n">best_fitness</span><span class="p">:</span>
                <span class="c1"># found a better solution</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">status_summary</span><span class="p">[</span><span class="s1">&#39;best_solution_age&#39;</span><span class="p">]</span><span class="o">=</span><span class="mi">0</span>
                <span class="n">best_fitness</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">min</span><span class="p">(</span><span class="n">current_fitness</span><span class="p">)</span>
                <span class="n">best_solution</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">population</span><span class="p">[</span><span class="n">sorted_indices</span><span class="p">[</span><span class="mi">0</span><span class="p">]]</span><span class="o">.</span><span class="n">coded</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="c1"># maintain old best solution</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">status_summary</span><span class="p">[</span><span class="s1">&#39;best_solution_age&#39;</span><span class="p">]</span><span class="o">+=</span><span class="mi">1</span>

            <span class="c1"># update dello status</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">status_summary</span><span class="p">[</span><span class="s1">&#39;generation&#39;</span><span class="p">]</span><span class="o">=</span><span class="n">generation</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">status_summary</span><span class="p">[</span><span class="s1">&#39;current_best_fitness&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">min</span><span class="p">(</span><span class="n">current_fitness</span><span class="p">))</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">status_summary</span><span class="p">[</span><span class="s1">&#39;mean_fitness&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">mean</span><span class="p">(</span><span class="n">current_fitness</span><span class="p">))</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">status_summary</span><span class="p">[</span><span class="s1">&#39;global_best_fitness&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">best_fitness</span><span class="p">)</span>

            <span class="k">if</span> <span class="n">generation</span><span class="o">%</span><span class="n">print_frequency</span><span class="o">==</span><span class="mi">0</span><span class="p">:</span>
                <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;[</span><span class="si">{</span><span class="n">generation</span><span class="si">:</span><span class="s2">&gt;6d</span><span class="si">}</span><span class="s2">/</span><span class="si">{</span><span class="n">max_generations</span><span class="si">:</span><span class="s2">&lt;6d</span><span class="si">}</span><span class="s2">] Ave.:</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">status_summary</span><span class="p">[</span><span class="s1">&#39;mean_fitness&#39;</span><span class="p">][</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span><span class="si">:</span><span class="s2">6.3g</span><span class="si">}</span><span class="s2"> Curr.Best:</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">status_summary</span><span class="p">[</span><span class="s1">&#39;current_best_fitness&#39;</span><span class="p">][</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span><span class="si">:</span><span class="s2">6.3g</span><span class="si">}</span><span class="s2"> Best:</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">status_summary</span><span class="p">[</span><span class="s1">&#39;global_best_fitness&#39;</span><span class="p">][</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span><span class="si">:</span><span class="s2">6.3g</span><span class="si">}</span><span class="s2"> [AGE </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">status_summary</span><span class="p">[</span><span class="s1">&#39;best_solution_age&#39;</span><span class="p">]</span><span class="si">}</span><span class="s2">]&quot;</span><span class="p">)</span>


        <span class="n">elapsed_time</span> <span class="o">=</span> <span class="n">timedelta</span><span class="p">(</span><span class="n">seconds</span><span class="o">=</span><span class="n">time</span><span class="o">.</span><span class="n">time</span><span class="p">()</span><span class="o">-</span><span class="n">optimization_start_time</span><span class="p">)</span>
        <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Elapsed Time: </span><span class="si">{</span><span class="nb">str</span><span class="p">(</span><span class="n">elapsed_time</span><span class="p">)</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">GAPy_solution</span><span class="p">(</span><span class="n">best_solution</span><span class="p">,</span><span class="n">best_fitness</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
              </details>



  <div class="doc doc-children">









<div class="doc doc-object doc-function">


<h2 id="gapy.GAPy.__init__" class="doc doc-heading">
            <code class="highlight language-python"><span class="fm">__init__</span><span class="p">(</span><span class="n">initial_population</span><span class="p">,</span> <span class="n">fitness_function</span><span class="p">,</span> <span class="n">selection_function</span><span class="p">,</span> <span class="n">crossover_function</span><span class="p">,</span> <span class="n">mutation_function</span><span class="p">)</span></code>

</h2>


    <div class="doc doc-contents ">



<table class="field-list">
  <colgroup>
    <col class="field-name" />
    <col class="field-body" />
  </colgroup>
  <tbody valign="top">
    <tr class="field">
      <th class="field-name">Parameters:</th>
      <td class="field-body">
        <ul class="first simple">
            <li>
              <b><code>initial_population</code></b>
                  (<code>list[<span title="typing.Any">Any</span>]</code>)
              
              <div class="doc-md-description">
                <p>List of the chromosomes forming the
initial population. Any type is supported.</p>
              </div>
            </li>
            <li>
              <b><code>fitness_function</code></b>
                  (<code><span title="typing.Callable">Callable</span>[[<span title="typing.Any">Any</span>], float]</code>)
              
              <div class="doc-md-description">
                <p>fitness function. Being
GAPy designed for minimization, the lower the fitness value
for a solution, the better it is.</p>
              </div>
            </li>
            <li>
              <b><code>selection_function</code></b>
                  (<code><span title="typing.Callable">Callable</span>[[list[<a class="autorefs autorefs-internal" title="gapy.GAPy_solution" href="classes.html#gapy.GAPy_solution">GAPy_solution</a>], int], list[<a class="autorefs autorefs-internal" title="gapy.GAPy_solution" href="classes.html#gapy.GAPy_solution">GAPy_solution</a>]]</code>)
              
              <div class="doc-md-description">
                <p>GA selection function.</p>
              </div>
            </li>
            <li>
              <b><code>crossover_function</code></b>
                  (<code><span title="typing.Callable">Callable</span>[[<span title="typing.Any">Any</span>, <span title="typing.Any">Any</span>], <span title="typing.Any">Any</span>]</code>)
              
              <div class="doc-md-description">
                <p>GA crossover function.</p>
              </div>
            </li>
            <li>
              <b><code>mutation_function</code></b>
                  (<code><span title="typing.Callable">Callable</span>[[<span title="typing.Any">Any</span>, <span title="typing.Any">Any</span>], <span title="typing.Any">Any</span>]</code>)
              
              <div class="doc-md-description">
                <p>GA mutation function.</p>
              </div>
            </li>
        </ul>
      </td>
    </tr>
  </tbody>
</table>

<table class="field-list">
  <colgroup>
    <col class="field-name" />
    <col class="field-body" />
  </colgroup>
  <tbody valign="top">
    <tr class="field">
      <th class="field-name">Returns:</th>
      <td class="field-body">
        <ul class="first simple">
            <li>
              
              <div class="doc-md-description">
                <p>None.</p>
              </div>
            </li>
        </ul>
      </td>
    </tr>
  </tbody>
</table>
            <details class="quote">
              <summary>Source code in <code>gapy.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">276</span>
<span class="normal">277</span>
<span class="normal">278</span>
<span class="normal">279</span>
<span class="normal">280</span>
<span class="normal">281</span>
<span class="normal">282</span>
<span class="normal">283</span>
<span class="normal">284</span>
<span class="normal">285</span>
<span class="normal">286</span>
<span class="normal">287</span>
<span class="normal">288</span>
<span class="normal">289</span>
<span class="normal">290</span>
<span class="normal">291</span>
<span class="normal">292</span>
<span class="normal">293</span>
<span class="normal">294</span>
<span class="normal">295</span>
<span class="normal">296</span>
<span class="normal">297</span>
<span class="normal">298</span>
<span class="normal">299</span>
<span class="normal">300</span>
<span class="normal">301</span>
<span class="normal">302</span>
<span class="normal">303</span>
<span class="normal">304</span>
<span class="normal">305</span>
<span class="normal">306</span>
<span class="normal">307</span>
<span class="normal">308</span>
<span class="normal">309</span>
<span class="normal">310</span>
<span class="normal">311</span>
<span class="normal">312</span>
<span class="normal">313</span>
<span class="normal">314</span>
<span class="normal">315</span>
<span class="normal">316</span>
<span class="normal">317</span>
<span class="normal">318</span>
<span class="normal">319</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">initial_population</span><span class="p">:</span><span class="nb">list</span><span class="p">[</span><span class="n">Any</span><span class="p">],</span>
             <span class="n">fitness_function</span><span class="p">:</span><span class="n">Callable</span><span class="p">[[</span><span class="n">Any</span><span class="p">],</span><span class="nb">float</span><span class="p">],</span>
             <span class="n">selection_function</span><span class="p">:</span><span class="n">Callable</span><span class="p">[[</span><span class="nb">list</span><span class="p">[</span><span class="n">GAPy_solution</span><span class="p">],</span><span class="nb">int</span><span class="p">],</span><span class="nb">list</span><span class="p">[</span><span class="n">GAPy_solution</span><span class="p">]],</span>
             <span class="n">crossover_function</span><span class="p">:</span><span class="n">Callable</span><span class="p">[[</span><span class="n">Any</span><span class="p">,</span><span class="n">Any</span><span class="p">],</span><span class="n">Any</span><span class="p">],</span>
             <span class="n">mutation_function</span><span class="p">:</span><span class="n">Callable</span><span class="p">[[</span><span class="n">Any</span><span class="p">,</span><span class="n">Any</span><span class="p">],</span><span class="n">Any</span><span class="p">]):</span>
<span class="w">    </span><span class="sd">&#39;&#39;&#39;</span>
<span class="sd">    Creates and initializes a GAPy object</span>

<span class="sd">    Args:</span>
<span class="sd">        initial_population (list[Any]): List of the chromosomes forming the</span>
<span class="sd">            initial population. Any type is supported.</span>
<span class="sd">        fitness_function (Callable[[Any],float]): fitness function. Being</span>
<span class="sd">            GAPy designed for minimization, the lower the fitness value</span>
<span class="sd">            for a solution, the better it is.</span>
<span class="sd">        selection_function (Callable[[list[GAPy_solution],int],list[GAPy_solution]]): GA selection function.</span>
<span class="sd">        crossover_function (Callable[[Any,Any],Any]): GA crossover function.</span>
<span class="sd">        mutation_function (Callable[[Any,Any],Any]): GA mutation function.</span>

<span class="sd">    Returns:</span>
<span class="sd">        None.</span>

<span class="sd">    &#39;&#39;&#39;</span>

    <span class="bp">self</span><span class="o">.</span><span class="n">pop_size</span><span class="o">=</span><span class="nb">len</span><span class="p">(</span><span class="n">initial_population</span><span class="p">)</span>

    <span class="bp">self</span><span class="o">.</span><span class="n">status_summary</span><span class="o">=</span><span class="p">{</span><span class="s1">&#39;generation&#39;</span><span class="p">:</span><span class="mi">0</span><span class="p">,</span>
                         <span class="s1">&#39;current_best_fitness&#39;</span><span class="p">:[],</span>
                         <span class="s1">&#39;mean_fitness&#39;</span><span class="p">:[],</span>
                         <span class="s1">&#39;global_best_fitness&#39;</span><span class="p">:[],</span>
                         <span class="s1">&#39;best_solution_age&#39;</span><span class="p">:</span><span class="mi">0</span><span class="p">}</span>

    <span class="c1"># creating the initial population</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">population</span><span class="o">=</span><span class="p">[]</span>
    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">pop_size</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">population</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">GAPy_solution</span><span class="p">(</span><span class="n">initial_population</span><span class="p">[</span><span class="n">i</span><span class="p">]))</span>
    <span class="c1">#self.population=np.array(self.population)</span>

    <span class="c1"># linking functions</span>
    <span class="c1"># =================</span>

    <span class="bp">self</span><span class="o">.</span><span class="n">fitness_function</span><span class="o">=</span><span class="n">fitness_function</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">selection_function</span><span class="o">=</span><span class="n">selection_function</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">crossover_function</span><span class="o">=</span><span class="n">crossover_function</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">mutation_function</span><span class="o">=</span><span class="n">mutation_function</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h2 id="gapy.GAPy.describe_population" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">describe_population</span><span class="p">()</span></code>

</h2>


    <div class="doc doc-contents ">

        <p>Shortly describes the GAPy actual population, including raw-coding
of each solution and fitness value.</p>


<table class="field-list">
  <colgroup>
    <col class="field-name" />
    <col class="field-body" />
  </colgroup>
  <tbody valign="top">
    <tr class="field">
      <th class="field-name">Returns:</th>
      <td class="field-body">
        <ul class="first simple">
            <li>
              
              <div class="doc-md-description">
                <p>None.</p>
              </div>
            </li>
        </ul>
      </td>
    </tr>
  </tbody>
</table>
            <details class="quote">
              <summary>Source code in <code>gapy.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">324</span>
<span class="normal">325</span>
<span class="normal">326</span>
<span class="normal">327</span>
<span class="normal">328</span>
<span class="normal">329</span>
<span class="normal">330</span>
<span class="normal">331</span>
<span class="normal">332</span>
<span class="normal">333</span>
<span class="normal">334</span>
<span class="normal">335</span>
<span class="normal">336</span>
<span class="normal">337</span>
<span class="normal">338</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">describe_population</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&#39;&#39;&#39;</span>
<span class="sd">    Shortly describes the GAPy actual population, including raw-coding</span>
<span class="sd">    of each solution and fitness value.</span>

<span class="sd">    Returns:</span>
<span class="sd">        None.</span>

<span class="sd">    &#39;&#39;&#39;</span>
    <span class="k">for</span> <span class="n">i</span><span class="p">,</span><span class="n">p</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">population</span><span class="p">):</span>
        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;[</span><span class="si">%d</span><span class="s1">] </span><span class="si">%s</span><span class="s1"> &#39;</span><span class="o">%</span><span class="p">(</span><span class="n">i</span><span class="o">+</span><span class="mi">1</span><span class="p">,</span><span class="n">p</span><span class="o">.</span><span class="n">coded</span><span class="p">),</span><span class="n">end</span><span class="o">=</span><span class="s1">&#39;&#39;</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">p</span><span class="o">.</span><span class="n">fitness</span><span class="o">==</span><span class="kc">None</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;F: na&#39;</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;F: </span><span class="si">%.3g</span><span class="s1">&#39;</span><span class="o">%</span><span class="n">p</span><span class="o">.</span><span class="n">fitness</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h2 id="gapy.GAPy.optimize" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">optimize</span><span class="p">(</span><span class="n">max_generations</span><span class="o">=</span><span class="mi">100</span><span class="p">,</span> <span class="n">target_fitness</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">max_time</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">Inf</span><span class="p">,</span> <span class="n">patience</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">Inf</span><span class="p">,</span> <span class="n">elite</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">recombination_rates</span><span class="o">=</span><span class="p">[</span><span class="mf">0.3</span><span class="p">,</span> <span class="mf">0.7</span><span class="p">,</span> <span class="mf">0.1</span><span class="p">],</span> <span class="n">print_frequency</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span></code>

</h2>


    <div class="doc doc-contents ">

        <p>Starts the GA-based optimization and returns the obtained solution.</p>


<table class="field-list">
  <colgroup>
    <col class="field-name" />
    <col class="field-body" />
  </colgroup>
  <tbody valign="top">
    <tr class="field">
      <th class="field-name">Parameters:</th>
      <td class="field-body">
        <ul class="first simple">
            <li>
              <b><code>max_generations</code></b>
                  (<code>int</code>, default:
                      <code>100</code>
)
              
              <div class="doc-md-description">
                <p>Maximum allowed generations for the GA. Defaults to 100.</p>
              </div>
            </li>
            <li>
              <b><code>target_fitness</code></b>
                  (<code>float</code>, default:
                      <code>0</code>
)
              
              <div class="doc-md-description">
                <p>Target fitness (minimization): if reached the algorithm stops. Defaults to 0.            </p>
              </div>
            </li>
            <li>
              <b><code>max_time</code></b>
                  (<code>float</code>, default:
                      <code><span title="numpy.Inf">Inf</span></code>
)
              
              <div class="doc-md-description">
                <p>Maximum time for optimization, in seconds. Defaults to np.Inf.</p>
              </div>
            </li>
            <li>
              <b><code>patience</code></b>
                  (<code>float</code>, default:
                      <code><span title="numpy.Inf">Inf</span></code>
)
              
              <div class="doc-md-description">
                <p>Maximum number of generations without improvement: if overcome the algorithm is stopped. Defaults to np.Inf.</p>
              </div>
            </li>
            <li>
              <b><code>elite</code></b>
                  (<code>int</code>, default:
                      <code>0</code>
)
              
              <div class="doc-md-description">
                <p>Number of elite candidate solutions. Defaults to 0.</p>
              </div>
            </li>
            <li>
              <b><code>recombination_rates</code></b>
                  (<code>list[int, int, int]</code>, default:
                      <code>[0.3, 0.7, 0.1]</code>
)
              
              <div class="doc-md-description">
                <p>Recombination rates: rate of survivors as they are,
rate of offspring solutions, rate of mutated elements. First 2 must sum up to 1. Last one &lt;=1. Defaults to [0.3, 0.7, 0.1].</p>
              </div>
            </li>
            <li>
              <b><code>print_frequency</code></b>
                  (<code>int</code>, default:
                      <code>1</code>
)
              
              <div class="doc-md-description">
                <p>Frequency of search status reporting in generations . Defaults to 1.</p>
              </div>
            </li>
        </ul>
      </td>
    </tr>
  </tbody>
</table>

<table class="field-list">
  <colgroup>
    <col class="field-name" />
    <col class="field-body" />
  </colgroup>
  <tbody valign="top">
    <tr class="field">
      <th class="field-name">Returns:</th>
      <td class="field-body">
        <ul class="first simple">
            <li>
<b><code>GAPy_solution</code></b>(                  <code><a class="autorefs autorefs-internal" title="gapy.GAPy_solution" href="classes.html#gapy.GAPy_solution">GAPy_solution</a></code>
)              
              <div class="doc-md-description">
                <p>achieved solution at the termination of the optimization.</p>
              </div>
            </li>
        </ul>
      </td>
    </tr>
  </tbody>
</table>
            <details class="quote">
              <summary>Source code in <code>gapy.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">372</span>
<span class="normal">373</span>
<span class="normal">374</span>
<span class="normal">375</span>
<span class="normal">376</span>
<span class="normal">377</span>
<span class="normal">378</span>
<span class="normal">379</span>
<span class="normal">380</span>
<span class="normal">381</span>
<span class="normal">382</span>
<span class="normal">383</span>
<span class="normal">384</span>
<span class="normal">385</span>
<span class="normal">386</span>
<span class="normal">387</span>
<span class="normal">388</span>
<span class="normal">389</span>
<span class="normal">390</span>
<span class="normal">391</span>
<span class="normal">392</span>
<span class="normal">393</span>
<span class="normal">394</span>
<span class="normal">395</span>
<span class="normal">396</span>
<span class="normal">397</span>
<span class="normal">398</span>
<span class="normal">399</span>
<span class="normal">400</span>
<span class="normal">401</span>
<span class="normal">402</span>
<span class="normal">403</span>
<span class="normal">404</span>
<span class="normal">405</span>
<span class="normal">406</span>
<span class="normal">407</span>
<span class="normal">408</span>
<span class="normal">409</span>
<span class="normal">410</span>
<span class="normal">411</span>
<span class="normal">412</span>
<span class="normal">413</span>
<span class="normal">414</span>
<span class="normal">415</span>
<span class="normal">416</span>
<span class="normal">417</span>
<span class="normal">418</span>
<span class="normal">419</span>
<span class="normal">420</span>
<span class="normal">421</span>
<span class="normal">422</span>
<span class="normal">423</span>
<span class="normal">424</span>
<span class="normal">425</span>
<span class="normal">426</span>
<span class="normal">427</span>
<span class="normal">428</span>
<span class="normal">429</span>
<span class="normal">430</span>
<span class="normal">431</span>
<span class="normal">432</span>
<span class="normal">433</span>
<span class="normal">434</span>
<span class="normal">435</span>
<span class="normal">436</span>
<span class="normal">437</span>
<span class="normal">438</span>
<span class="normal">439</span>
<span class="normal">440</span>
<span class="normal">441</span>
<span class="normal">442</span>
<span class="normal">443</span>
<span class="normal">444</span>
<span class="normal">445</span>
<span class="normal">446</span>
<span class="normal">447</span>
<span class="normal">448</span>
<span class="normal">449</span>
<span class="normal">450</span>
<span class="normal">451</span>
<span class="normal">452</span>
<span class="normal">453</span>
<span class="normal">454</span>
<span class="normal">455</span>
<span class="normal">456</span>
<span class="normal">457</span>
<span class="normal">458</span>
<span class="normal">459</span>
<span class="normal">460</span>
<span class="normal">461</span>
<span class="normal">462</span>
<span class="normal">463</span>
<span class="normal">464</span>
<span class="normal">465</span>
<span class="normal">466</span>
<span class="normal">467</span>
<span class="normal">468</span>
<span class="normal">469</span>
<span class="normal">470</span>
<span class="normal">471</span>
<span class="normal">472</span>
<span class="normal">473</span>
<span class="normal">474</span>
<span class="normal">475</span>
<span class="normal">476</span>
<span class="normal">477</span>
<span class="normal">478</span>
<span class="normal">479</span>
<span class="normal">480</span>
<span class="normal">481</span>
<span class="normal">482</span>
<span class="normal">483</span>
<span class="normal">484</span>
<span class="normal">485</span>
<span class="normal">486</span>
<span class="normal">487</span>
<span class="normal">488</span>
<span class="normal">489</span>
<span class="normal">490</span>
<span class="normal">491</span>
<span class="normal">492</span>
<span class="normal">493</span>
<span class="normal">494</span>
<span class="normal">495</span>
<span class="normal">496</span>
<span class="normal">497</span>
<span class="normal">498</span>
<span class="normal">499</span>
<span class="normal">500</span>
<span class="normal">501</span>
<span class="normal">502</span>
<span class="normal">503</span>
<span class="normal">504</span>
<span class="normal">505</span>
<span class="normal">506</span>
<span class="normal">507</span>
<span class="normal">508</span>
<span class="normal">509</span>
<span class="normal">510</span>
<span class="normal">511</span>
<span class="normal">512</span>
<span class="normal">513</span>
<span class="normal">514</span>
<span class="normal">515</span>
<span class="normal">516</span>
<span class="normal">517</span>
<span class="normal">518</span>
<span class="normal">519</span>
<span class="normal">520</span>
<span class="normal">521</span>
<span class="normal">522</span>
<span class="normal">523</span>
<span class="normal">524</span>
<span class="normal">525</span>
<span class="normal">526</span>
<span class="normal">527</span>
<span class="normal">528</span>
<span class="normal">529</span>
<span class="normal">530</span>
<span class="normal">531</span>
<span class="normal">532</span>
<span class="normal">533</span>
<span class="normal">534</span>
<span class="normal">535</span>
<span class="normal">536</span>
<span class="normal">537</span>
<span class="normal">538</span>
<span class="normal">539</span>
<span class="normal">540</span>
<span class="normal">541</span>
<span class="normal">542</span>
<span class="normal">543</span>
<span class="normal">544</span>
<span class="normal">545</span>
<span class="normal">546</span>
<span class="normal">547</span>
<span class="normal">548</span>
<span class="normal">549</span>
<span class="normal">550</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">optimize</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">max_generations</span><span class="p">:</span><span class="nb">int</span><span class="o">=</span><span class="mi">100</span><span class="p">,</span>
             <span class="n">target_fitness</span><span class="p">:</span><span class="nb">float</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span>
             <span class="n">max_time</span><span class="p">:</span><span class="nb">float</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">Inf</span><span class="p">,</span>
             <span class="n">patience</span><span class="p">:</span><span class="nb">float</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">Inf</span><span class="p">,</span>
             <span class="n">elite</span><span class="p">:</span><span class="nb">int</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span>
             <span class="n">recombination_rates</span><span class="p">:</span><span class="nb">list</span><span class="p">[</span><span class="nb">int</span><span class="p">,</span><span class="nb">int</span><span class="p">,</span><span class="nb">int</span><span class="p">]</span><span class="o">=</span><span class="p">[</span><span class="mf">0.3</span><span class="p">,</span> <span class="mf">0.7</span><span class="p">,</span> <span class="mf">0.1</span><span class="p">],</span>
             <span class="n">print_frequency</span><span class="p">:</span><span class="nb">int</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span><span class="o">-&gt;</span><span class="n">GAPy_solution</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&#39;&#39;&#39;</span>
<span class="sd">    Starts the GA-based optimization and returns the obtained solution.</span>

<span class="sd">    Args:</span>
<span class="sd">        max_generations (int, optional): Maximum allowed generations for the GA. Defaults to 100.</span>
<span class="sd">        target_fitness (float, optional): Target fitness (minimization): if reached the algorithm stops. Defaults to 0.            </span>
<span class="sd">        max_time (float, optional): Maximum time for optimization, in seconds. Defaults to np.Inf.</span>
<span class="sd">        patience (float, optional): Maximum number of generations without improvement: if overcome the algorithm is stopped. Defaults to np.Inf.</span>
<span class="sd">        elite (int, optional): Number of elite candidate solutions. Defaults to 0.</span>
<span class="sd">        recombination_rates (list[int,int,int], optional): Recombination rates: rate of survivors as they are,</span>
<span class="sd">            rate of offspring solutions, rate of mutated elements. First 2 must sum up to 1. Last one &lt;=1. Defaults to [0.3, 0.7, 0.1].</span>
<span class="sd">        print_frequency (int, optional): Frequency of search status reporting in generations . Defaults to 1.</span>

<span class="sd">    Returns:</span>
<span class="sd">        GAPy_solution: achieved solution at the termination of the optimization.</span>

<span class="sd">    &#39;&#39;&#39;</span>


    <span class="n">optimization_start_time</span><span class="o">=</span><span class="n">time</span><span class="o">.</span><span class="n">time</span><span class="p">()</span>

    <span class="c1"># initializations</span>
    <span class="n">generation</span><span class="o">=</span><span class="mi">1</span>

    <span class="c1"># number of arguments of genetic operators</span>
    <span class="n">nargs_crossover</span><span class="o">=</span><span class="nb">len</span><span class="p">(</span><span class="n">signature</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">crossover_function</span><span class="p">)</span><span class="o">.</span><span class="n">parameters</span><span class="p">)</span>

    <span class="c1"># first evaluation and associated operations</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_eval_population</span><span class="p">()</span>
    <span class="n">current_fitness</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_get_solutions_fitness</span><span class="p">()</span>


    <span class="c1"># for elite</span>
    <span class="n">sorted_indices</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">argsort</span><span class="p">(</span><span class="n">current_fitness</span><span class="p">)</span>    

    <span class="c1"># best element and fitness</span>
    <span class="n">best_fitness</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">min</span><span class="p">(</span><span class="n">current_fitness</span><span class="p">)</span>
    <span class="c1">#best_solution=self.population[sorted_indices[0]]</span>


    <span class="c1"># update dello status</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">status_summary</span><span class="p">[</span><span class="s1">&#39;generation&#39;</span><span class="p">]</span><span class="o">=</span><span class="n">generation</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">status_summary</span><span class="p">[</span><span class="s1">&#39;current_best_fitness&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">min</span><span class="p">(</span><span class="n">current_fitness</span><span class="p">))</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">status_summary</span><span class="p">[</span><span class="s1">&#39;mean_fitness&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">mean</span><span class="p">(</span><span class="n">current_fitness</span><span class="p">))</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">status_summary</span><span class="p">[</span><span class="s1">&#39;global_best_fitness&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">best_fitness</span><span class="p">)</span>


    <span class="c1"># print(&#39;[%d/%d] Ave: %6.3g  Curr.Best: %6.3g  Best: %6.3g [Age: %d]&#39;%(generation,</span>
    <span class="c1">#                                                         max_generations,</span>
    <span class="c1">#                                                         np.mean(current_fitness),</span>
    <span class="c1">#                                                         np.min(current_fitness),</span>
    <span class="c1">#                                                         best_fitness,</span>
    <span class="c1">#                                                         self.status_summary[&#39;best_solution_age&#39;]</span>
    <span class="c1">#                                                         )) </span>

    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;[</span><span class="si">{</span><span class="n">generation</span><span class="si">:</span><span class="s2">&gt;6d</span><span class="si">}</span><span class="s2">/</span><span class="si">{</span><span class="n">max_generations</span><span class="si">:</span><span class="s2">&lt;6d</span><span class="si">}</span><span class="s2">] Ave.:</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">status_summary</span><span class="p">[</span><span class="s1">&#39;mean_fitness&#39;</span><span class="p">][</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span><span class="si">:</span><span class="s2">6.3g</span><span class="si">}</span><span class="s2"> Curr.Best:</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">status_summary</span><span class="p">[</span><span class="s1">&#39;current_best_fitness&#39;</span><span class="p">][</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span><span class="si">:</span><span class="s2">6.3g</span><span class="si">}</span><span class="s2"> Best:</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">status_summary</span><span class="p">[</span><span class="s1">&#39;global_best_fitness&#39;</span><span class="p">][</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span><span class="si">:</span><span class="s2">6.3g</span><span class="si">}</span><span class="s2"> [AGE </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">status_summary</span><span class="p">[</span><span class="s1">&#39;best_solution_age&#39;</span><span class="p">]</span><span class="si">}</span><span class="s2">]&quot;</span><span class="p">)</span>



    <span class="c1">#   =========================================</span>
    <span class="c1">#   MAIN CYCLE</span>
    <span class="c1">#   =========================================</span>
    <span class="c1"># in the cycle if terminal condition not satisfied</span>

    <span class="n">best_fitness</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">Inf</span>
    <span class="k">while</span> <span class="n">generation</span><span class="o">&lt;</span><span class="n">max_generations</span> <span class="ow">and</span> \
        <span class="n">best_fitness</span><span class="o">&gt;</span><span class="n">target_fitness</span> <span class="ow">and</span> \
        <span class="bp">self</span><span class="o">.</span><span class="n">status_summary</span><span class="p">[</span><span class="s1">&#39;best_solution_age&#39;</span><span class="p">]</span><span class="o">&lt;=</span><span class="n">patience</span> <span class="ow">and</span> \
        <span class="n">time</span><span class="o">.</span><span class="n">time</span><span class="p">()</span><span class="o">-</span><span class="n">optimization_start_time</span><span class="o">&lt;</span><span class="n">max_time</span><span class="p">:</span>


        <span class="c1"># EVOLVING THE POPULATION</span>
        <span class="c1"># =============================</span>

        <span class="c1"># determine recombination rates</span>
        <span class="n">num_survivors</span><span class="o">=</span><span class="nb">int</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">round</span><span class="p">(</span><span class="n">recombination_rates</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">*</span><span class="bp">self</span><span class="o">.</span><span class="n">pop_size</span><span class="p">))</span><span class="o">-</span><span class="n">elite</span>
        <span class="n">num_crossover</span><span class="o">=</span><span class="nb">int</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">pop_size</span><span class="o">-</span><span class="p">(</span><span class="n">num_survivors</span><span class="o">+</span><span class="n">elite</span><span class="p">))</span>
        <span class="n">num_mutations</span><span class="o">=</span><span class="nb">int</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">round</span><span class="p">(</span><span class="n">recombination_rates</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span><span class="o">*</span><span class="bp">self</span><span class="o">.</span><span class="n">pop_size</span><span class="p">))</span>


        <span class="c1"># preparation of new population:</span>
        <span class="c1"># starts as an empty list of GAPy_solution</span>
        <span class="n">new_population</span><span class="o">=</span><span class="p">[]</span>


        <span class="c1"># adding survivors</span>
        <span class="c1"># ====================</span>
        <span class="n">survivors</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">selection_function</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">population</span><span class="p">,</span> <span class="n">num_survivors</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">s</span> <span class="ow">in</span> <span class="n">survivors</span><span class="p">:</span>
            <span class="n">s</span><span class="o">.</span><span class="n">changed</span><span class="o">=</span><span class="kc">False</span>
            <span class="n">new_population</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">copy</span><span class="o">.</span><span class="n">deepcopy</span><span class="p">(</span><span class="n">s</span><span class="p">))</span>

        <span class="c1"># adding offsprings</span>
        <span class="c1"># ====================</span>
        <span class="k">for</span> <span class="n">id_offspring</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">num_crossover</span><span class="p">):</span>
            <span class="n">parents</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">selection_function</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">population</span><span class="p">,</span><span class="mi">2</span><span class="p">)</span>
<span class="w">            </span><span class="sd">&#39;&#39;&#39;</span>
<span class="sd">            There are basically two types of hard-coded crossover functions (CF):</span>
<span class="sd">                1. Simple one: the CF takes only the 2 parents and mixes them</span>
<span class="sd">                2. Weighted: the CF takes 4 arguments, namely the 2 parents</span>
<span class="sd">                    and their fitness values (in this order) and generates</span>
<span class="sd">                    offspring considering this latter information.</span>

<span class="sd">            This is detected from the CF itself based on its number of arguments.</span>
<span class="sd">            &#39;&#39;&#39;</span>
            <span class="k">if</span> <span class="n">nargs_crossover</span><span class="o">==</span><span class="mi">2</span><span class="p">:</span> <span class="c1"># simple corssover function</span>
                <span class="n">new_candidate</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">crossover_function</span><span class="p">(</span><span class="n">parents</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">coded</span><span class="p">,</span><span class="n">parents</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">coded</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span> <span class="c1"># pass additional info</span>
                <span class="n">new_candidate</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">crossover_function</span><span class="p">(</span><span class="n">parents</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">coded</span><span class="p">,</span>
                                                      <span class="n">parents</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">coded</span><span class="p">,</span>
                                                      <span class="n">parents</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">fitness</span><span class="p">,</span>
                                                      <span class="n">parents</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">fitness</span><span class="p">)</span>

            <span class="n">new_candidate</span><span class="o">=</span><span class="n">GAPy_solution</span><span class="p">(</span><span class="n">new_candidate</span><span class="p">)</span>
            <span class="n">new_population</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">new_candidate</span><span class="p">)</span>

        <span class="c1"># preserve elite-solutions from mutation</span>
        <span class="n">elite_solutions</span><span class="o">=</span><span class="p">[]</span>
        <span class="k">for</span> <span class="n">e</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">elite</span><span class="p">):</span>
            <span class="n">elite_solutions</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">copy</span><span class="o">.</span><span class="n">deepcopy</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">population</span><span class="p">[</span><span class="n">sorted_indices</span><span class="p">[</span><span class="n">e</span><span class="p">]]))</span>

        <span class="c1"># perform mutations</span>
        <span class="c1"># ====================</span>
        <span class="n">mutating_p</span><span class="o">=</span><span class="nb">list</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">choice</span><span class="p">(</span><span class="n">new_population</span><span class="p">,</span><span class="n">num_mutations</span><span class="p">))</span>
        <span class="k">for</span> <span class="n">mp</span> <span class="ow">in</span> <span class="n">mutating_p</span><span class="p">:</span>
            <span class="n">mp</span><span class="o">.</span><span class="n">coded</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">mutation_function</span><span class="p">(</span><span class="n">mp</span><span class="o">.</span><span class="n">coded</span><span class="p">)</span>
            <span class="n">mp</span><span class="o">.</span><span class="n">fitness</span><span class="o">=</span><span class="kc">None</span>
            <span class="n">mp</span><span class="o">.</span><span class="n">changed</span><span class="o">=</span><span class="kc">True</span>


        <span class="c1"># after mutation copy the elite solutions</span>
        <span class="k">for</span> <span class="n">e</span> <span class="ow">in</span> <span class="n">elite_solutions</span><span class="p">:</span>
            <span class="n">new_population</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">e</span><span class="p">)</span>


        <span class="c1"># set new population</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">population</span><span class="o">=</span><span class="n">new_population</span>


        <span class="c1"># NEW EVALUATION OF POPULATION</span>
        <span class="c1"># =============================</span>
        <span class="n">generation</span><span class="o">+=</span><span class="mi">1</span>
        <span class="c1"># evaluate population and related operations</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_eval_population</span><span class="p">()</span>
        <span class="n">current_fitness</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_get_solutions_fitness</span><span class="p">()</span>
        <span class="n">sorted_indices</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">argsort</span><span class="p">(</span><span class="n">current_fitness</span><span class="p">)</span>

        <span class="c1">#self.describe_population()</span>
        <span class="c1">#input(&quot;Press Enter to continue...&quot;)</span>

        <span class="k">if</span> <span class="n">np</span><span class="o">.</span><span class="n">min</span><span class="p">(</span><span class="n">current_fitness</span><span class="p">)</span><span class="o">&lt;</span><span class="n">best_fitness</span><span class="p">:</span>
            <span class="c1"># found a better solution</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">status_summary</span><span class="p">[</span><span class="s1">&#39;best_solution_age&#39;</span><span class="p">]</span><span class="o">=</span><span class="mi">0</span>
            <span class="n">best_fitness</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">min</span><span class="p">(</span><span class="n">current_fitness</span><span class="p">)</span>
            <span class="n">best_solution</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">population</span><span class="p">[</span><span class="n">sorted_indices</span><span class="p">[</span><span class="mi">0</span><span class="p">]]</span><span class="o">.</span><span class="n">coded</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="c1"># maintain old best solution</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">status_summary</span><span class="p">[</span><span class="s1">&#39;best_solution_age&#39;</span><span class="p">]</span><span class="o">+=</span><span class="mi">1</span>

        <span class="c1"># update dello status</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">status_summary</span><span class="p">[</span><span class="s1">&#39;generation&#39;</span><span class="p">]</span><span class="o">=</span><span class="n">generation</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">status_summary</span><span class="p">[</span><span class="s1">&#39;current_best_fitness&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">min</span><span class="p">(</span><span class="n">current_fitness</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">status_summary</span><span class="p">[</span><span class="s1">&#39;mean_fitness&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">mean</span><span class="p">(</span><span class="n">current_fitness</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">status_summary</span><span class="p">[</span><span class="s1">&#39;global_best_fitness&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">best_fitness</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">generation</span><span class="o">%</span><span class="n">print_frequency</span><span class="o">==</span><span class="mi">0</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;[</span><span class="si">{</span><span class="n">generation</span><span class="si">:</span><span class="s2">&gt;6d</span><span class="si">}</span><span class="s2">/</span><span class="si">{</span><span class="n">max_generations</span><span class="si">:</span><span class="s2">&lt;6d</span><span class="si">}</span><span class="s2">] Ave.:</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">status_summary</span><span class="p">[</span><span class="s1">&#39;mean_fitness&#39;</span><span class="p">][</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span><span class="si">:</span><span class="s2">6.3g</span><span class="si">}</span><span class="s2"> Curr.Best:</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">status_summary</span><span class="p">[</span><span class="s1">&#39;current_best_fitness&#39;</span><span class="p">][</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span><span class="si">:</span><span class="s2">6.3g</span><span class="si">}</span><span class="s2"> Best:</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">status_summary</span><span class="p">[</span><span class="s1">&#39;global_best_fitness&#39;</span><span class="p">][</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span><span class="si">:</span><span class="s2">6.3g</span><span class="si">}</span><span class="s2"> [AGE </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">status_summary</span><span class="p">[</span><span class="s1">&#39;best_solution_age&#39;</span><span class="p">]</span><span class="si">}</span><span class="s2">]&quot;</span><span class="p">)</span>


    <span class="n">elapsed_time</span> <span class="o">=</span> <span class="n">timedelta</span><span class="p">(</span><span class="n">seconds</span><span class="o">=</span><span class="n">time</span><span class="o">.</span><span class="n">time</span><span class="p">()</span><span class="o">-</span><span class="n">optimization_start_time</span><span class="p">)</span>
    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Elapsed Time: </span><span class="si">{</span><span class="nb">str</span><span class="p">(</span><span class="n">elapsed_time</span><span class="p">)</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">GAPy_solution</span><span class="p">(</span><span class="n">best_solution</span><span class="p">,</span><span class="n">best_fitness</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>



  </div>

    </div>

</div><h2 id="genetic-optimization">Genetic optimization</h2>
<p>Optimization starts by calling the <code>optimize</code> method of the GAPy optimizer. This call requires the setting of some parameters regarding the optimization process as follows:</p>


<div class="doc doc-object doc-function">



<a id="gapy.GAPy.optimize"></a>
    <div class="doc doc-contents first">

        <p>Starts the GA-based optimization and returns the obtained solution.</p>


<table class="field-list">
  <colgroup>
    <col class="field-name" />
    <col class="field-body" />
  </colgroup>
  <tbody valign="top">
    <tr class="field">
      <th class="field-name">Parameters:</th>
      <td class="field-body">
        <ul class="first simple">
            <li>
              <b><code>max_generations</code></b>
                  (<code>int</code>, default:
                      <code>100</code>
)
              
              <div class="doc-md-description">
                <p>Maximum allowed generations for the GA. Defaults to 100.</p>
              </div>
            </li>
            <li>
              <b><code>target_fitness</code></b>
                  (<code>float</code>, default:
                      <code>0</code>
)
              
              <div class="doc-md-description">
                <p>Target fitness (minimization): if reached the algorithm stops. Defaults to 0.            </p>
              </div>
            </li>
            <li>
              <b><code>max_time</code></b>
                  (<code>float</code>, default:
                      <code><span title="numpy.Inf">Inf</span></code>
)
              
              <div class="doc-md-description">
                <p>Maximum time for optimization, in seconds. Defaults to np.Inf.</p>
              </div>
            </li>
            <li>
              <b><code>patience</code></b>
                  (<code>float</code>, default:
                      <code><span title="numpy.Inf">Inf</span></code>
)
              
              <div class="doc-md-description">
                <p>Maximum number of generations without improvement: if overcome the algorithm is stopped. Defaults to np.Inf.</p>
              </div>
            </li>
            <li>
              <b><code>elite</code></b>
                  (<code>int</code>, default:
                      <code>0</code>
)
              
              <div class="doc-md-description">
                <p>Number of elite candidate solutions. Defaults to 0.</p>
              </div>
            </li>
            <li>
              <b><code>recombination_rates</code></b>
                  (<code>list[int, int, int]</code>, default:
                      <code>[0.3, 0.7, 0.1]</code>
)
              
              <div class="doc-md-description">
                <p>Recombination rates: rate of survivors as they are,
rate of offspring solutions, rate of mutated elements. First 2 must sum up to 1. Last one &lt;=1. Defaults to [0.3, 0.7, 0.1].</p>
              </div>
            </li>
            <li>
              <b><code>print_frequency</code></b>
                  (<code>int</code>, default:
                      <code>1</code>
)
              
              <div class="doc-md-description">
                <p>Frequency of search status reporting in generations . Defaults to 1.</p>
              </div>
            </li>
        </ul>
      </td>
    </tr>
  </tbody>
</table>

<table class="field-list">
  <colgroup>
    <col class="field-name" />
    <col class="field-body" />
  </colgroup>
  <tbody valign="top">
    <tr class="field">
      <th class="field-name">Returns:</th>
      <td class="field-body">
        <ul class="first simple">
            <li>
<b><code>GAPy_solution</code></b>(                  <code><a class="autorefs autorefs-internal" title="gapy.GAPy_solution" href="classes.html#gapy.GAPy_solution">GAPy_solution</a></code>
)              
              <div class="doc-md-description">
                <p>achieved solution at the termination of the optimization.</p>
              </div>
            </li>
        </ul>
      </td>
    </tr>
  </tbody>
</table>
            <details class="quote">
              <summary>Source code in <code>gapy.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">372</span>
<span class="normal">373</span>
<span class="normal">374</span>
<span class="normal">375</span>
<span class="normal">376</span>
<span class="normal">377</span>
<span class="normal">378</span>
<span class="normal">379</span>
<span class="normal">380</span>
<span class="normal">381</span>
<span class="normal">382</span>
<span class="normal">383</span>
<span class="normal">384</span>
<span class="normal">385</span>
<span class="normal">386</span>
<span class="normal">387</span>
<span class="normal">388</span>
<span class="normal">389</span>
<span class="normal">390</span>
<span class="normal">391</span>
<span class="normal">392</span>
<span class="normal">393</span>
<span class="normal">394</span>
<span class="normal">395</span>
<span class="normal">396</span>
<span class="normal">397</span>
<span class="normal">398</span>
<span class="normal">399</span>
<span class="normal">400</span>
<span class="normal">401</span>
<span class="normal">402</span>
<span class="normal">403</span>
<span class="normal">404</span>
<span class="normal">405</span>
<span class="normal">406</span>
<span class="normal">407</span>
<span class="normal">408</span>
<span class="normal">409</span>
<span class="normal">410</span>
<span class="normal">411</span>
<span class="normal">412</span>
<span class="normal">413</span>
<span class="normal">414</span>
<span class="normal">415</span>
<span class="normal">416</span>
<span class="normal">417</span>
<span class="normal">418</span>
<span class="normal">419</span>
<span class="normal">420</span>
<span class="normal">421</span>
<span class="normal">422</span>
<span class="normal">423</span>
<span class="normal">424</span>
<span class="normal">425</span>
<span class="normal">426</span>
<span class="normal">427</span>
<span class="normal">428</span>
<span class="normal">429</span>
<span class="normal">430</span>
<span class="normal">431</span>
<span class="normal">432</span>
<span class="normal">433</span>
<span class="normal">434</span>
<span class="normal">435</span>
<span class="normal">436</span>
<span class="normal">437</span>
<span class="normal">438</span>
<span class="normal">439</span>
<span class="normal">440</span>
<span class="normal">441</span>
<span class="normal">442</span>
<span class="normal">443</span>
<span class="normal">444</span>
<span class="normal">445</span>
<span class="normal">446</span>
<span class="normal">447</span>
<span class="normal">448</span>
<span class="normal">449</span>
<span class="normal">450</span>
<span class="normal">451</span>
<span class="normal">452</span>
<span class="normal">453</span>
<span class="normal">454</span>
<span class="normal">455</span>
<span class="normal">456</span>
<span class="normal">457</span>
<span class="normal">458</span>
<span class="normal">459</span>
<span class="normal">460</span>
<span class="normal">461</span>
<span class="normal">462</span>
<span class="normal">463</span>
<span class="normal">464</span>
<span class="normal">465</span>
<span class="normal">466</span>
<span class="normal">467</span>
<span class="normal">468</span>
<span class="normal">469</span>
<span class="normal">470</span>
<span class="normal">471</span>
<span class="normal">472</span>
<span class="normal">473</span>
<span class="normal">474</span>
<span class="normal">475</span>
<span class="normal">476</span>
<span class="normal">477</span>
<span class="normal">478</span>
<span class="normal">479</span>
<span class="normal">480</span>
<span class="normal">481</span>
<span class="normal">482</span>
<span class="normal">483</span>
<span class="normal">484</span>
<span class="normal">485</span>
<span class="normal">486</span>
<span class="normal">487</span>
<span class="normal">488</span>
<span class="normal">489</span>
<span class="normal">490</span>
<span class="normal">491</span>
<span class="normal">492</span>
<span class="normal">493</span>
<span class="normal">494</span>
<span class="normal">495</span>
<span class="normal">496</span>
<span class="normal">497</span>
<span class="normal">498</span>
<span class="normal">499</span>
<span class="normal">500</span>
<span class="normal">501</span>
<span class="normal">502</span>
<span class="normal">503</span>
<span class="normal">504</span>
<span class="normal">505</span>
<span class="normal">506</span>
<span class="normal">507</span>
<span class="normal">508</span>
<span class="normal">509</span>
<span class="normal">510</span>
<span class="normal">511</span>
<span class="normal">512</span>
<span class="normal">513</span>
<span class="normal">514</span>
<span class="normal">515</span>
<span class="normal">516</span>
<span class="normal">517</span>
<span class="normal">518</span>
<span class="normal">519</span>
<span class="normal">520</span>
<span class="normal">521</span>
<span class="normal">522</span>
<span class="normal">523</span>
<span class="normal">524</span>
<span class="normal">525</span>
<span class="normal">526</span>
<span class="normal">527</span>
<span class="normal">528</span>
<span class="normal">529</span>
<span class="normal">530</span>
<span class="normal">531</span>
<span class="normal">532</span>
<span class="normal">533</span>
<span class="normal">534</span>
<span class="normal">535</span>
<span class="normal">536</span>
<span class="normal">537</span>
<span class="normal">538</span>
<span class="normal">539</span>
<span class="normal">540</span>
<span class="normal">541</span>
<span class="normal">542</span>
<span class="normal">543</span>
<span class="normal">544</span>
<span class="normal">545</span>
<span class="normal">546</span>
<span class="normal">547</span>
<span class="normal">548</span>
<span class="normal">549</span>
<span class="normal">550</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span> <span class="nf">optimize</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">max_generations</span><span class="p">:</span><span class="nb">int</span><span class="o">=</span><span class="mi">100</span><span class="p">,</span>
             <span class="n">target_fitness</span><span class="p">:</span><span class="nb">float</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span>
             <span class="n">max_time</span><span class="p">:</span><span class="nb">float</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">Inf</span><span class="p">,</span>
             <span class="n">patience</span><span class="p">:</span><span class="nb">float</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">Inf</span><span class="p">,</span>
             <span class="n">elite</span><span class="p">:</span><span class="nb">int</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span>
             <span class="n">recombination_rates</span><span class="p">:</span><span class="nb">list</span><span class="p">[</span><span class="nb">int</span><span class="p">,</span><span class="nb">int</span><span class="p">,</span><span class="nb">int</span><span class="p">]</span><span class="o">=</span><span class="p">[</span><span class="mf">0.3</span><span class="p">,</span> <span class="mf">0.7</span><span class="p">,</span> <span class="mf">0.1</span><span class="p">],</span>
             <span class="n">print_frequency</span><span class="p">:</span><span class="nb">int</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span><span class="o">-&gt;</span><span class="n">GAPy_solution</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&#39;&#39;&#39;</span>
<span class="sd">    Starts the GA-based optimization and returns the obtained solution.</span>

<span class="sd">    Args:</span>
<span class="sd">        max_generations (int, optional): Maximum allowed generations for the GA. Defaults to 100.</span>
<span class="sd">        target_fitness (float, optional): Target fitness (minimization): if reached the algorithm stops. Defaults to 0.            </span>
<span class="sd">        max_time (float, optional): Maximum time for optimization, in seconds. Defaults to np.Inf.</span>
<span class="sd">        patience (float, optional): Maximum number of generations without improvement: if overcome the algorithm is stopped. Defaults to np.Inf.</span>
<span class="sd">        elite (int, optional): Number of elite candidate solutions. Defaults to 0.</span>
<span class="sd">        recombination_rates (list[int,int,int], optional): Recombination rates: rate of survivors as they are,</span>
<span class="sd">            rate of offspring solutions, rate of mutated elements. First 2 must sum up to 1. Last one &lt;=1. Defaults to [0.3, 0.7, 0.1].</span>
<span class="sd">        print_frequency (int, optional): Frequency of search status reporting in generations . Defaults to 1.</span>

<span class="sd">    Returns:</span>
<span class="sd">        GAPy_solution: achieved solution at the termination of the optimization.</span>

<span class="sd">    &#39;&#39;&#39;</span>


    <span class="n">optimization_start_time</span><span class="o">=</span><span class="n">time</span><span class="o">.</span><span class="n">time</span><span class="p">()</span>

    <span class="c1"># initializations</span>
    <span class="n">generation</span><span class="o">=</span><span class="mi">1</span>

    <span class="c1"># number of arguments of genetic operators</span>
    <span class="n">nargs_crossover</span><span class="o">=</span><span class="nb">len</span><span class="p">(</span><span class="n">signature</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">crossover_function</span><span class="p">)</span><span class="o">.</span><span class="n">parameters</span><span class="p">)</span>

    <span class="c1"># first evaluation and associated operations</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_eval_population</span><span class="p">()</span>
    <span class="n">current_fitness</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_get_solutions_fitness</span><span class="p">()</span>


    <span class="c1"># for elite</span>
    <span class="n">sorted_indices</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">argsort</span><span class="p">(</span><span class="n">current_fitness</span><span class="p">)</span>    

    <span class="c1"># best element and fitness</span>
    <span class="n">best_fitness</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">min</span><span class="p">(</span><span class="n">current_fitness</span><span class="p">)</span>
    <span class="c1">#best_solution=self.population[sorted_indices[0]]</span>


    <span class="c1"># update dello status</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">status_summary</span><span class="p">[</span><span class="s1">&#39;generation&#39;</span><span class="p">]</span><span class="o">=</span><span class="n">generation</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">status_summary</span><span class="p">[</span><span class="s1">&#39;current_best_fitness&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">min</span><span class="p">(</span><span class="n">current_fitness</span><span class="p">))</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">status_summary</span><span class="p">[</span><span class="s1">&#39;mean_fitness&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">mean</span><span class="p">(</span><span class="n">current_fitness</span><span class="p">))</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">status_summary</span><span class="p">[</span><span class="s1">&#39;global_best_fitness&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">best_fitness</span><span class="p">)</span>


    <span class="c1"># print(&#39;[%d/%d] Ave: %6.3g  Curr.Best: %6.3g  Best: %6.3g [Age: %d]&#39;%(generation,</span>
    <span class="c1">#                                                         max_generations,</span>
    <span class="c1">#                                                         np.mean(current_fitness),</span>
    <span class="c1">#                                                         np.min(current_fitness),</span>
    <span class="c1">#                                                         best_fitness,</span>
    <span class="c1">#                                                         self.status_summary[&#39;best_solution_age&#39;]</span>
    <span class="c1">#                                                         )) </span>

    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;[</span><span class="si">{</span><span class="n">generation</span><span class="si">:</span><span class="s2">&gt;6d</span><span class="si">}</span><span class="s2">/</span><span class="si">{</span><span class="n">max_generations</span><span class="si">:</span><span class="s2">&lt;6d</span><span class="si">}</span><span class="s2">] Ave.:</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">status_summary</span><span class="p">[</span><span class="s1">&#39;mean_fitness&#39;</span><span class="p">][</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span><span class="si">:</span><span class="s2">6.3g</span><span class="si">}</span><span class="s2"> Curr.Best:</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">status_summary</span><span class="p">[</span><span class="s1">&#39;current_best_fitness&#39;</span><span class="p">][</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span><span class="si">:</span><span class="s2">6.3g</span><span class="si">}</span><span class="s2"> Best:</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">status_summary</span><span class="p">[</span><span class="s1">&#39;global_best_fitness&#39;</span><span class="p">][</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span><span class="si">:</span><span class="s2">6.3g</span><span class="si">}</span><span class="s2"> [AGE </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">status_summary</span><span class="p">[</span><span class="s1">&#39;best_solution_age&#39;</span><span class="p">]</span><span class="si">}</span><span class="s2">]&quot;</span><span class="p">)</span>



    <span class="c1">#   =========================================</span>
    <span class="c1">#   MAIN CYCLE</span>
    <span class="c1">#   =========================================</span>
    <span class="c1"># in the cycle if terminal condition not satisfied</span>

    <span class="n">best_fitness</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">Inf</span>
    <span class="k">while</span> <span class="n">generation</span><span class="o">&lt;</span><span class="n">max_generations</span> <span class="ow">and</span> \
        <span class="n">best_fitness</span><span class="o">&gt;</span><span class="n">target_fitness</span> <span class="ow">and</span> \
        <span class="bp">self</span><span class="o">.</span><span class="n">status_summary</span><span class="p">[</span><span class="s1">&#39;best_solution_age&#39;</span><span class="p">]</span><span class="o">&lt;=</span><span class="n">patience</span> <span class="ow">and</span> \
        <span class="n">time</span><span class="o">.</span><span class="n">time</span><span class="p">()</span><span class="o">-</span><span class="n">optimization_start_time</span><span class="o">&lt;</span><span class="n">max_time</span><span class="p">:</span>


        <span class="c1"># EVOLVING THE POPULATION</span>
        <span class="c1"># =============================</span>

        <span class="c1"># determine recombination rates</span>
        <span class="n">num_survivors</span><span class="o">=</span><span class="nb">int</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">round</span><span class="p">(</span><span class="n">recombination_rates</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">*</span><span class="bp">self</span><span class="o">.</span><span class="n">pop_size</span><span class="p">))</span><span class="o">-</span><span class="n">elite</span>
        <span class="n">num_crossover</span><span class="o">=</span><span class="nb">int</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">pop_size</span><span class="o">-</span><span class="p">(</span><span class="n">num_survivors</span><span class="o">+</span><span class="n">elite</span><span class="p">))</span>
        <span class="n">num_mutations</span><span class="o">=</span><span class="nb">int</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">round</span><span class="p">(</span><span class="n">recombination_rates</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span><span class="o">*</span><span class="bp">self</span><span class="o">.</span><span class="n">pop_size</span><span class="p">))</span>


        <span class="c1"># preparation of new population:</span>
        <span class="c1"># starts as an empty list of GAPy_solution</span>
        <span class="n">new_population</span><span class="o">=</span><span class="p">[]</span>


        <span class="c1"># adding survivors</span>
        <span class="c1"># ====================</span>
        <span class="n">survivors</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">selection_function</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">population</span><span class="p">,</span> <span class="n">num_survivors</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">s</span> <span class="ow">in</span> <span class="n">survivors</span><span class="p">:</span>
            <span class="n">s</span><span class="o">.</span><span class="n">changed</span><span class="o">=</span><span class="kc">False</span>
            <span class="n">new_population</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">copy</span><span class="o">.</span><span class="n">deepcopy</span><span class="p">(</span><span class="n">s</span><span class="p">))</span>

        <span class="c1"># adding offsprings</span>
        <span class="c1"># ====================</span>
        <span class="k">for</span> <span class="n">id_offspring</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">num_crossover</span><span class="p">):</span>
            <span class="n">parents</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">selection_function</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">population</span><span class="p">,</span><span class="mi">2</span><span class="p">)</span>
<span class="w">            </span><span class="sd">&#39;&#39;&#39;</span>
<span class="sd">            There are basically two types of hard-coded crossover functions (CF):</span>
<span class="sd">                1. Simple one: the CF takes only the 2 parents and mixes them</span>
<span class="sd">                2. Weighted: the CF takes 4 arguments, namely the 2 parents</span>
<span class="sd">                    and their fitness values (in this order) and generates</span>
<span class="sd">                    offspring considering this latter information.</span>

<span class="sd">            This is detected from the CF itself based on its number of arguments.</span>
<span class="sd">            &#39;&#39;&#39;</span>
            <span class="k">if</span> <span class="n">nargs_crossover</span><span class="o">==</span><span class="mi">2</span><span class="p">:</span> <span class="c1"># simple corssover function</span>
                <span class="n">new_candidate</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">crossover_function</span><span class="p">(</span><span class="n">parents</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">coded</span><span class="p">,</span><span class="n">parents</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">coded</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span> <span class="c1"># pass additional info</span>
                <span class="n">new_candidate</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">crossover_function</span><span class="p">(</span><span class="n">parents</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">coded</span><span class="p">,</span>
                                                      <span class="n">parents</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">coded</span><span class="p">,</span>
                                                      <span class="n">parents</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">fitness</span><span class="p">,</span>
                                                      <span class="n">parents</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">fitness</span><span class="p">)</span>

            <span class="n">new_candidate</span><span class="o">=</span><span class="n">GAPy_solution</span><span class="p">(</span><span class="n">new_candidate</span><span class="p">)</span>
            <span class="n">new_population</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">new_candidate</span><span class="p">)</span>

        <span class="c1"># preserve elite-solutions from mutation</span>
        <span class="n">elite_solutions</span><span class="o">=</span><span class="p">[]</span>
        <span class="k">for</span> <span class="n">e</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">elite</span><span class="p">):</span>
            <span class="n">elite_solutions</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">copy</span><span class="o">.</span><span class="n">deepcopy</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">population</span><span class="p">[</span><span class="n">sorted_indices</span><span class="p">[</span><span class="n">e</span><span class="p">]]))</span>

        <span class="c1"># perform mutations</span>
        <span class="c1"># ====================</span>
        <span class="n">mutating_p</span><span class="o">=</span><span class="nb">list</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">choice</span><span class="p">(</span><span class="n">new_population</span><span class="p">,</span><span class="n">num_mutations</span><span class="p">))</span>
        <span class="k">for</span> <span class="n">mp</span> <span class="ow">in</span> <span class="n">mutating_p</span><span class="p">:</span>
            <span class="n">mp</span><span class="o">.</span><span class="n">coded</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">mutation_function</span><span class="p">(</span><span class="n">mp</span><span class="o">.</span><span class="n">coded</span><span class="p">)</span>
            <span class="n">mp</span><span class="o">.</span><span class="n">fitness</span><span class="o">=</span><span class="kc">None</span>
            <span class="n">mp</span><span class="o">.</span><span class="n">changed</span><span class="o">=</span><span class="kc">True</span>


        <span class="c1"># after mutation copy the elite solutions</span>
        <span class="k">for</span> <span class="n">e</span> <span class="ow">in</span> <span class="n">elite_solutions</span><span class="p">:</span>
            <span class="n">new_population</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">e</span><span class="p">)</span>


        <span class="c1"># set new population</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">population</span><span class="o">=</span><span class="n">new_population</span>


        <span class="c1"># NEW EVALUATION OF POPULATION</span>
        <span class="c1"># =============================</span>
        <span class="n">generation</span><span class="o">+=</span><span class="mi">1</span>
        <span class="c1"># evaluate population and related operations</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_eval_population</span><span class="p">()</span>
        <span class="n">current_fitness</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_get_solutions_fitness</span><span class="p">()</span>
        <span class="n">sorted_indices</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">argsort</span><span class="p">(</span><span class="n">current_fitness</span><span class="p">)</span>

        <span class="c1">#self.describe_population()</span>
        <span class="c1">#input(&quot;Press Enter to continue...&quot;)</span>

        <span class="k">if</span> <span class="n">np</span><span class="o">.</span><span class="n">min</span><span class="p">(</span><span class="n">current_fitness</span><span class="p">)</span><span class="o">&lt;</span><span class="n">best_fitness</span><span class="p">:</span>
            <span class="c1"># found a better solution</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">status_summary</span><span class="p">[</span><span class="s1">&#39;best_solution_age&#39;</span><span class="p">]</span><span class="o">=</span><span class="mi">0</span>
            <span class="n">best_fitness</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">min</span><span class="p">(</span><span class="n">current_fitness</span><span class="p">)</span>
            <span class="n">best_solution</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">population</span><span class="p">[</span><span class="n">sorted_indices</span><span class="p">[</span><span class="mi">0</span><span class="p">]]</span><span class="o">.</span><span class="n">coded</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="c1"># maintain old best solution</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">status_summary</span><span class="p">[</span><span class="s1">&#39;best_solution_age&#39;</span><span class="p">]</span><span class="o">+=</span><span class="mi">1</span>

        <span class="c1"># update dello status</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">status_summary</span><span class="p">[</span><span class="s1">&#39;generation&#39;</span><span class="p">]</span><span class="o">=</span><span class="n">generation</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">status_summary</span><span class="p">[</span><span class="s1">&#39;current_best_fitness&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">min</span><span class="p">(</span><span class="n">current_fitness</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">status_summary</span><span class="p">[</span><span class="s1">&#39;mean_fitness&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">mean</span><span class="p">(</span><span class="n">current_fitness</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">status_summary</span><span class="p">[</span><span class="s1">&#39;global_best_fitness&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">best_fitness</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">generation</span><span class="o">%</span><span class="n">print_frequency</span><span class="o">==</span><span class="mi">0</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;[</span><span class="si">{</span><span class="n">generation</span><span class="si">:</span><span class="s2">&gt;6d</span><span class="si">}</span><span class="s2">/</span><span class="si">{</span><span class="n">max_generations</span><span class="si">:</span><span class="s2">&lt;6d</span><span class="si">}</span><span class="s2">] Ave.:</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">status_summary</span><span class="p">[</span><span class="s1">&#39;mean_fitness&#39;</span><span class="p">][</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span><span class="si">:</span><span class="s2">6.3g</span><span class="si">}</span><span class="s2"> Curr.Best:</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">status_summary</span><span class="p">[</span><span class="s1">&#39;current_best_fitness&#39;</span><span class="p">][</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span><span class="si">:</span><span class="s2">6.3g</span><span class="si">}</span><span class="s2"> Best:</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">status_summary</span><span class="p">[</span><span class="s1">&#39;global_best_fitness&#39;</span><span class="p">][</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span><span class="si">:</span><span class="s2">6.3g</span><span class="si">}</span><span class="s2"> [AGE </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">status_summary</span><span class="p">[</span><span class="s1">&#39;best_solution_age&#39;</span><span class="p">]</span><span class="si">}</span><span class="s2">]&quot;</span><span class="p">)</span>


    <span class="n">elapsed_time</span> <span class="o">=</span> <span class="n">timedelta</span><span class="p">(</span><span class="n">seconds</span><span class="o">=</span><span class="n">time</span><span class="o">.</span><span class="n">time</span><span class="p">()</span><span class="o">-</span><span class="n">optimization_start_time</span><span class="p">)</span>
    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Elapsed Time: </span><span class="si">{</span><span class="nb">str</span><span class="p">(</span><span class="n">elapsed_time</span><span class="p">)</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">GAPy_solution</span><span class="p">(</span><span class="n">best_solution</span><span class="p">,</span><span class="n">best_fitness</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div><h2 id="optimization-results">Optimization results</h2>
<p>The <code>optimize</code> method restuns the solution as a <code>GAPy_solution object</code>. It basically contains two fields:</p>
<ul>
<li>
<p><code>.coded</code> with the raw version of the solution</p>
</li>
<li>
<p><code>.fitness</code> with its fitness value.</p>
</li>
</ul>
              
            </div>
          </div><footer>
    <div class="rst-footer-buttons" role="navigation" aria-label="Footer Navigation">
        <a href="classes.html" class="btn btn-neutral float-left" title="Classes"><span class="icon icon-circle-arrow-left"></span> Previous</a>
        <a href="resources.html" class="btn btn-neutral float-right" title="Resources">Next <span class="icon icon-circle-arrow-right"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <!-- Copyright etc -->
  </div>

  Built with <a href="https://www.mkdocs.org/">MkDocs</a> using a <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>.
</footer>
          
        </div>
      </div>

    </section>

  </div>

  <div class="rst-versions" role="note" aria-label="Versions">
  <span class="rst-current-version" data-toggle="rst-current-version">
    
    
      <span><a href="classes.html" style="color: #fcfcfc">&laquo; Previous</a></span>
    
    
      <span><a href="resources.html" style="color: #fcfcfc">Next &raquo;</a></span>
    
  </span>
</div>
    <script src="js/jquery-3.6.0.min.js"></script>
    <script>var base_url = ".";</script>
    <script src="js/theme_extra.js"></script>
    <script src="js/theme.js"></script>
    <script>
        jQuery(function () {
            SphinxRtdTheme.Navigation.enable(true);
        });
    </script>

</body>
</html>
